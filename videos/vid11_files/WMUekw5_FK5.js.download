;/*FB_PKG_DELIM*/

__d("WAWebNewsletterVideoPlayLoggingContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({finishCount:1,setFinishCount:function(){}});g["default"]=b}),98);
__d("WAWebDomPlayVideo",["Promise"],(function(a,b,c,d,e,f){var g;function a(a){if(a.__playPromise)return a.__playPromise;var c=new(g||(g=b("Promise")))(function(b,c){function d(c){a.removeEventListener("playing",d),a.removeEventListener("error",e),(!a.videoHeight||!a.videoWidth)&&d(c),delete a.__playPromise,b()}function e(b){a.removeEventListener("playing",d),a.removeEventListener("error",e),delete a.__playPromise,c(b)}a.addEventListener("playing",d);a.addEventListener("error",e);var f=a.play();h(f)&&(a.removeEventListener("playing",d),a.removeEventListener("error",e),f.then(function(){delete a.__playPromise,b()})["catch"](function(b){delete a.__playPromise,c(b)}))});a.__playPromise=c;return c}function h(a){return a&&typeof a.then==="function"}f["default"]=a}),66);
__d("WAWebWamEnumPlaybackOriginType",[],(function(a,b,c,d,e,f){a=Object.freeze({CONVERSATION:1,STATUS:2,CHANNELS:3});f.PLAYBACK_ORIGIN_TYPE=a}),66);
__d("WAWebWamEnumPlaybackStateType",[],(function(a,b,c,d,e,f){a=Object.freeze({IDLE:1,READY_PLAY:2,READY_PAUSE:3,BUFFERING:4,OUTSIDE:5,ENDED:6,ERROR:7});f.PLAYBACK_STATE_TYPE=a}),66);
__d("WAWebMediaStreamPlaybackWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMediaType","WAWebWamEnumPlaybackOriginType","WAWebWamEnumPlaybackStateType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({MediaStreamPlayback:[1584,{bytesDownloadedStart:[4,a.TYPES.NUMBER],bytesTransferred:[5,a.TYPES.NUMBER],didPlay:[15,a.TYPES.BOOLEAN],forcedPlayCount:[12,a.TYPES.INTEGER],initialBufferingT:[7,a.TYPES.TIMER],mediaSize:[2,a.TYPES.NUMBER],mediaType:[3,d("WAWebWamEnumMediaType").MEDIA_TYPE],overallPlayT:[10,a.TYPES.TIMER],overallT:[1,a.TYPES.TIMER],playbackCount:[14,a.TYPES.INTEGER],playbackError:[17,a.TYPES.INTEGER],playbackOrigin:[16,d("WAWebWamEnumPlaybackOriginType").PLAYBACK_ORIGIN_TYPE],playbackState:[11,d("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE],seekCount:[13,a.TYPES.INTEGER],totalRebufferingCount:[9,a.TYPES.INTEGER],totalRebufferingT:[8,a.TYPES.TIMER],videoDuration:[6,a.TYPES.INTEGER]},[1,1,1],"regular"]},{MediaStreamPlayback:[]});g.MediaStreamPlaybackWamEvent=b}),98);
__d("useWAWebMediaStreamPlaybackMetric",["WAWebMediaStreamPlaybackWamEvent","WAWebPipVideoStreaming","WAWebWamEnumMediaType","WAWebWamEnumPlaybackOriginType","WAWebWamEnumPlaybackStateType","react","useLazyRef","useWAWebStableCallback"],(function(a,b,c,d,e,f,g){var h;b=h||d("react");var i=b.experimental_useEffectEvent,j=b.useEffect,k=b.useRef;function l(a){return new(d("WAWebMediaStreamPlaybackWamEvent").MediaStreamPlaybackWamEvent)({playbackOrigin:a,mediaType:d("WAWebWamEnumMediaType").MEDIA_TYPE.VIDEO,didPlay:!1,playbackState:d("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.IDLE})}function a(a,b,e,f){f===void 0&&(f=d("WAWebWamEnumPlaybackOriginType").PLAYBACK_ORIGIN_TYPE.CONVERSATION);var g=k(!0),h=c("useLazyRef")(function(){return l(f)}),m=i(function(a){var b=function(){a.commit(),g.current=!0,h.current=l(f),window.removeEventListener("unload",b)};return b});j(function(){if(a==null||!a.startsWith(d("WAWebPipVideoStreaming").VIDEO_STREAM_URL))return;var b=h.current;b=m(b);window.addEventListener("unload",b);return b},[a,h]);var n=c("useWAWebStableCallback")(function(a){b.current&&(h.current.videoDuration=Math.floor(b.current.duration)),e.onDurationChange==null||e.onDurationChange(a)}),o=c("useWAWebStableCallback")(function(a){h.current.playbackState=d("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.READY_PLAY,h.current.didPlay||(h.current.didPlay=!0),e.onPlaying==null||e.onPlaying()}),p=c("useWAWebStableCallback")(function(a){h.current.playbackState===d("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.READY_PLAY&&(h.current.playbackState=d("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.READY_PAUSE),e.onPause==null||e.onPause(a)}),q=c("useWAWebStableCallback")(function(a){h.current.playbackState=d("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.BUFFERING,g.current?h.current.startInitialBufferingT():h.current.startTotalRebufferingT(),e.onWaiting==null||e.onWaiting(a)}),r=c("useWAWebStableCallback")(function(a){h.current.playbackState=d("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.READY_PAUSE,g.current?(h.current.markInitialBufferingT(),g.current=!1):h.current.markTotalRebufferingT(),e.onCanPlay==null||e.onCanPlay(a)}),s=c("useWAWebStableCallback")(function(a){h.current.playbackState=d("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.ENDED,e.onEnded==null||e.onEnded(a)}),t=c("useWAWebStableCallback")(function(a){var c;h.current.playbackState=d("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.ERROR;c=(c=(c=(c=b.current)==null||(c=c.error)==null?void 0:c.code)!=null?c:a.code)!=null?c:null;c!=null&&(h.current.playbackError=c);e.onError==null||e.onError(a)});return{mediaStreamPlaybackMetricRef:h,wrappedProps:{onDurationChange:n,onPlaying:o,onWaiting:q,onCanPlay:r,onEnded:s,onError:t,onPause:p}}}g.useMediaStreamPlaybackMetric=a}),98);
__d("useWAWebBaseVideoCommon",["Promise","WAAbortError","WALogger","WAWebDomPlayVideo","WAWebPttAudioChannels","WAWebUA","asyncToGeneratorRuntime","err","react","useWAWebMediaStreamPlaybackMetric","useWAWebOnUnmount","useWAWebStableCallback"],(function(a,b,c,d,e,f,g){var h,i,j,k,l=["onPlaying"],m,n;e=n||d("react");var o=e.useEffect,p=e.useRef;function a(a,e,f,g,n){var q=p(0),r=p(null),s=p(null);f=d("useWAWebMediaStreamPlaybackMetric").useMediaStreamPlaybackMetric(f,r,g);g=f.wrappedProps;var t=g.onPlaying,u=babelHelpers.objectWithoutPropertiesLoose(g,l),v=(f=c("useWAWebStableCallback"))(function(a){a=r.current;if(!a)return;if(a.paused)return;a.videoHeight>0&&a.videoWidth>0&&(t==null||t(),n==null||n.onPlayingExtra==null||n.onPlayingExtra(r))}),w=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=r.current;if(!a)return(m||(m=b("Promise"))).reject(c("err")("cannot play unmounted video"));if(!a.paused)return(m||(m=b("Promise"))).resolve();a.removeEventListener("playing",v);try{yield c("WAWebDomPlayVideo")(a),a.addEventListener("playing",v),v()}catch(b){var e;a.addEventListener("playing",v);if(b.name===d("WAAbortError").ABORT_ERROR){d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["video.play() promise rejected w/ AbortError: ",", error code: ",""])),b.message,b.code);return}a=(a=(a=r.current)==null||(a=a.error)==null?void 0:a.message)!=null?a:"";e=(e=(e=r.current)==null||(e=e.error)==null?void 0:e.code)!=null?e:"";d("WALogger").WARN(i||(i=babelHelpers.taggedTemplateLiteralLoose(["video.play() promise rejected: "," The error code is ","."])),a,e);u.onError==null||u.onError(b)}});return function(){return a.apply(this,arguments)}}(),x=f(function(){void w()}),y=f(function(){var a=r.current;if((a==null?void 0:a.paused)!==!0){a==null||a.pause();n==null||n.onPauseExtra==null||n.onPauseExtra((a=a==null?void 0:a.currentTime)!=null?a:0)}});g=f(function(){var a;return(a=(a=r.current)==null?void 0:a.volume)!=null?a:0});var z=f(function(a){r.current&&(r.current.volume=a)}),A=f(function(){var a;return(a=(a=r.current)==null?void 0:a.muted)!=null?a:!1}),B=f(function(a){r.current&&(r.current.muted=a)}),C=f(function(){var a;return(a=(a=r.current)==null?void 0:a.paused)!=null?a:!0}),D=f(function(){var a;return(a=(a=r.current)==null?void 0:a.currentTime)!=null?a:0}),E=f(function(a){r.current&&(r.current.currentTime=a)}),F=f(function(){var a;return(a=(a=r.current)==null?void 0:a.duration)!=null?a:0}),G=f(function(a){r.current&&(r.current.duration=a)}),H=f(function(){var a=r.current;a&&(a.currentTime=0,y())}),I=f(function(){var a;return(a=(a=r.current)==null?void 0:a.buffered)!=null?a:null}),J=f(function(){return r.current}),K=function(a){a=r.current;if(!a)return;a.removeEventListener("playing",K);if(!a.videoHeight||!a.videoWidth){y();x();a=6;q.current<a&&q.current++;var b;q.current>1&&q.current<a&&(b="the height and width of the video is not zero, count (larger than 1): "+q.current);q.current>=a&&(b="the height and width of the video is not zero, count larger than "+q.current);b!=null&&d("WALogger").ERROR(j||(j=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed! ",""])),b).sendLogs("base-video-non-zero-height-and-width")}},L=f(function(b,c){if(a!==!0)return;b.removeEventListener("playing",K);b.addEventListener("playing",K);var d=b.srcObject;(d!=null||c&&b.paused)&&x()});f=f(function(b){var c;if(b===r.current)return;(c=r.current)==null||c.removeEventListener("playing",v);s.current==null||s.current();r.current=b;if(b==null)return;s.current=d("WAWebPttAudioChannels").MainAudioChannel.registerMedia(b);"srcObject"in b&&e?b.srcObject=e:b.src||d("WALogger").WARN(k||(k=babelHelpers.taggedTemplateLiteralLoose(["srcObject is not supported in video tag while src is not set."])));b.addEventListener("playing",v);a===!0&&L(b,d("WAWebUA").UA.isGecko||d("WAWebUA").UA.isSafari)});o(function(){var b=r.current;b!=null&&a===!0&&L(b,!0)},[a]);c("useWAWebOnUnmount")(function(){s.current==null||s.current()});return{videoRef:r,autoPlayErrorCountRef:q,unregisterFromAudioChannelRef:s,wrappedProps:u,handlePlaying:v,play:x,pause:y,getVolume:g,setVolume:z,getMuted:A,setMuted:B,getPaused:C,getCurrentTime:D,setCurrentTime:E,getDuration:F,setDuration:G,pauseAndReset:H,getBuffered:I,underlyingVideo:J,setRefVideo:f}}g["default"]=a}),98);
__d("WAWebWamEnumVideoPlayOrigin",[],(function(a,b,c,d,e,f){a=Object.freeze({CONVERSATION:1,GALLERY_PICKER:2,STARRED_MESSAGES:3,MEDIA_VIEW_PAGER:4,OTHER_ORIGIN:5,CHANNELS:6,STATUS:7});f.VIDEO_PLAY_ORIGIN=a}),66);
__d("WAWebWamEnumVideoPlayResult",[],(function(a,b,c,d,e,f){a=Object.freeze({OK:1,ERROR_PLAYER:2,ERROR_VIDEO_TRACK:3,ERROR_AUDIO_TRACK:4,ERROR_DOWNLOAD_FAILED:5});f.VIDEO_PLAY_RESULT=a}),66);
__d("WAWebWamEnumVideoPlayType",[],(function(a,b,c,d,e,f){a=Object.freeze({FILE:1,STREAM:2,SENT:3});f.VIDEO_PLAY_TYPE=a}),66);
__d("WAWebChannelsVideoPlayWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumVideoPlayOrigin","WAWebWamEnumVideoPlayResult","WAWebWamEnumVideoPlayType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({ChannelsVideoPlay:[6556,{autoPlayT:[1,a.TYPES.INTEGER],cid:[2,a.TYPES.STRING],finishCount:[13,a.TYPES.INTEGER],height:[3,a.TYPES.INTEGER],postId:[4,a.TYPES.STRING],videoDuration:[5,a.TYPES.INTEGER],videoInitialBufferingT:[6,a.TYPES.TIMER],videoPlayOrigin:[7,d("WAWebWamEnumVideoPlayOrigin").VIDEO_PLAY_ORIGIN],videoPlayResult:[8,d("WAWebWamEnumVideoPlayResult").VIDEO_PLAY_RESULT],videoPlayT:[9,a.TYPES.INTEGER],videoPlayType:[10,d("WAWebWamEnumVideoPlayType").VIDEO_PLAY_TYPE],videoSize:[11,a.TYPES.NUMBER],width:[12,a.TYPES.INTEGER]},[1,1,1],"regular"]},{ChannelsVideoPlay:[]});g.ChannelsVideoPlayWamEvent=b}),98);
__d("useWAWebNewsletterVideoPlayMetric",["WAWebChannelsVideoPlayWamEvent","WAWebWamEnumVideoPlayOrigin","WAWebWamEnumVideoPlayResult","WAWebWamEnumVideoPlayType","react","useLazyRef","useWAWebStableCallback"],(function(a,b,c,d,e,f,g){var h;b=h||d("react");var i=b.experimental_useEffectEvent,j=b.useEffect,k=b.useRef;function l(a,b){return new(d("WAWebChannelsVideoPlayWamEvent").ChannelsVideoPlayWamEvent)({cid:a,postId:b,videoPlayOrigin:d("WAWebWamEnumVideoPlayOrigin").VIDEO_PLAY_ORIGIN.CHANNELS,videoPlayType:d("WAWebWamEnumVideoPlayType").VIDEO_PLAY_TYPE.STREAM,videoPlayResult:d("WAWebWamEnumVideoPlayResult").VIDEO_PLAY_RESULT.OK})}function a(a,b){var e,f=k(!0),g=c("useLazyRef")(function(){return l(a,b)}),h=i(function(c){var d=function(){c.commit(),f.current=!0,g.current=l(a,b),window.removeEventListener("unload",d)};return d});j(function(){var a=g.current;a=h(a);window.addEventListener("unload",a);return a},[g]);var m=(e=c("useWAWebStableCallback"))(function(a){var b,c;g.current.videoPlayResult=d("WAWebWamEnumVideoPlayResult").VIDEO_PLAY_RESULT.OK;b=(b=(b=a.current)==null?void 0:b.videoHeight)!=null?b:0;c=(c=(c=a.current)==null?void 0:c.videoWidth)!=null?c:0;g.current.height=b;g.current.width=c;g.current.videoDuration=Math.floor((c=(b=a.current)==null?void 0:b.duration)!=null?c:0)}),n=e(function(a){var b;g.current.videoPlayT=((b=g.current.videoPlayT)!=null?b:0)+Math.floor(a)}),o=e(function(){f.current&&g.current.startVideoInitialBufferingT()}),p=e(function(){f.current&&(g.current.markVideoInitialBufferingT(),f.current=!1)}),q=e(function(a,b){g.current.finishCount=b;a=((a=(a=a.current)==null?void 0:a.duration)!=null?a:0)*b;g.current.videoPlayT=Math.floor(a)});e=e(function(a){a=(a=(a=a.current)==null||(a=a.error)==null?void 0:a.code)!=null?a:null;a!=null&&(g.current.videoPlayResult=d("WAWebWamEnumVideoPlayResult").VIDEO_PLAY_RESULT.ERROR_PLAYER)});return{channelsVideoPlayRef:g,videoProps:{onChannelVideoPlaying:m,onChannelVideoPause:n,onChannelVideoWaiting:o,onChannelVideoCanPlay:p,onChannelVideoEnded:q,onChannelVideoError:e}}}g.useWAWebNewsletterVideoPlayMetric=a}),98);
__d("WAWebBaseNewsletterVideo.react",["WAWebFrontendMsgGetters","WAWebNewsletterVideoPlayLoggingContext","react","useWAWebBaseVideoCommon","useWAWebNewsletterVideoPlayMetric","useWAWebStableCallback"],(function(a,b,c,d,e,f,g){var h=["autoPlay","children","className","msg","ref","srcObject"],i=["videoCallbacks"],j,k;function l(a){if(null==a)throw new TypeError("Cannot destructure "+a)}b=k||d("react");var m=j||(j=c("react")),n=b.useContext,o=b.useImperativeHandle;function a(a){var b=a.autoPlay,e=a.children,f=a.className,g=a.msg,j=a.ref,k=a.srcObject;a=babelHelpers.objectWithoutPropertiesLoose(a,h);var p=a.videoCallbacks,q=babelHelpers.objectWithoutPropertiesLoose(a,i),r=n(c("WAWebNewsletterVideoPlayLoggingContext")),s=r.finishCount,t=r.setFinishCount;r=d("WAWebFrontendMsgGetters").getChat(g).id.toString().replace(/@.*/,"");g=(g=g.serverId)!=null?g:0;r=d("useWAWebNewsletterVideoPlayMetric").useWAWebNewsletterVideoPlayMetric(r,g.toString());var u=babelHelpers["extends"]({},(l(r.videoProps),r.videoProps));g=c("useWAWebBaseVideoCommon")(b,k,a.src,q,{onPlayingExtra:function(a){u.onChannelVideoPlaying==null||u.onChannelVideoPlaying(a)},onPauseExtra:function(a){u.onChannelVideoPause==null||u.onChannelVideoPause(a)}});var v=g.videoRef,w=g.play,x=g.pause,y=g.getPaused,z=g.getCurrentTime,A=g.setCurrentTime,B=g.getDuration,C=g.setDuration,D=g.getVolume,E=g.setVolume,F=g.getMuted,G=g.setMuted,H=g.getBuffered,I=g.underlyingVideo,J=g.pauseAndReset;r=g.setRefVideo;k=g.wrappedProps;var K=c("useWAWebStableCallback")(function(){u.onChannelVideoWaiting==null||u.onChannelVideoWaiting()}),L=c("useWAWebStableCallback")(function(){u.onChannelVideoCanPlay==null||u.onChannelVideoCanPlay()}),M=c("useWAWebStableCallback")(function(){u.onChannelVideoError==null||u.onChannelVideoError(v)}),N=c("useWAWebStableCallback")(function(){t(s+1),u.onChannelVideoEnded==null||u.onChannelVideoEnded(v,s)});o(j,function(){return{play:w,pause:x,getPaused:y,getCurrentTime:z,setCurrentTime:A,getDuration:B,setDuration:C,getVolume:D,setVolume:E,getMuted:F,setMuted:G,getBuffered:H,underlyingVideo:I,pauseAndReset:J,onWaiting:K,canPlay:L,end:N,onError:M}},[w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,N,M]);return m.jsx("video",babelHelpers["extends"]({},p,{ref:r,autoPlay:a.src!=null?b:void 0,className:f!=null?f:"x1lliihq xh8yej3 x5yr21d"},q,k,{children:e}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebBaseVideo.react",["WAWebNoop","react","useWAWebBaseVideoCommon"],(function(a,b,c,d,e,f,g){var h=["autoPlay","children","className","ref","srcObject"],i=["videoCallbacks"],j,k,l=k||c("react"),m=(j||(j=d("react"))).useImperativeHandle;function a(a){var b,d=a.autoPlay,e=a.children,f=a.className,g=a.ref,j=a.srcObject;a=babelHelpers.objectWithoutPropertiesLoose(a,h);var k=a.videoCallbacks,n=babelHelpers.objectWithoutPropertiesLoose(a,i);j=c("useWAWebBaseVideoCommon")(d,j,a.src,n,void 0);var o=j.play,p=j.pause,q=j.getPaused,r=j.getCurrentTime,s=j.setCurrentTime,t=j.getDuration,u=j.setDuration,v=j.getVolume,w=j.setVolume,x=j.getMuted,y=j.setMuted,z=j.getBuffered,A=j.underlyingVideo,B=j.pauseAndReset,C=j.setRefVideo;j=j.wrappedProps;var D=b=c("WAWebNoop"),E=b,F=b,G=b;m(g,function(){return{play:o,pause:p,getPaused:q,getCurrentTime:r,setCurrentTime:s,getDuration:t,setDuration:u,getVolume:v,setVolume:w,getMuted:x,setMuted:y,getBuffered:z,underlyingVideo:A,pauseAndReset:B,end:D,canPlay:F,onError:G,onWaiting:E}},[o,p,q,r,s,t,u,v,w,x,y,z,A,B,D,F,G,E]);return l.jsx("video",babelHelpers["extends"]({},k,{ref:C,autoPlay:a.src!=null?d:void 0,className:f!=null?f:"x1lliihq xh8yej3 x5yr21d"},n,j,{children:e}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebBaseVideoNewsletterContextProvider",["WAWebNewsletterVideoPlayLoggingContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useMemo,k=b.useState;function a(a){a=a.children;var b=k(1),d=b[0],e=b[1];b=j(function(){return{finishCount:d,setFinishCount:e}},[d,e]);return i.jsx(c("WAWebNewsletterVideoPlayLoggingContext").Provider,{value:b,children:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebOrchestratorJobEventSampling",[],(function(a,b,c,d,e,f){a={sendMessage:10,createLidPnMappings:10,updateLidMetadata:10,getAllUserDisclosures:10,handleBusinessNotification:5,syncMyDeviceList:5,receiptBatcherRunActiveBatches:5,updateDraftMessageChat:5};b={JOB_EVENT_SAMPLING_RATE:a};f["default"]=b}),66);
__d("WAWebPipUrlVideoTag.react",["WAWebBaseNewsletterVideo.react","WAWebBaseVideo.react","WAWebBaseVideoNewsletterContextProvider","WAWebDebounce","WAWebMsgGetters","WAWebNewsletterGatingUtils","WAWebUserPrefsGeneral","react","useMergeRefs","useWAWebOnUnmount","useWAWebStableCallback"],(function(a,b,c,d,e,f,g){var h=["ref"],i,j;b=j||d("react");var k=i||(i=c("react")),l=b.useEffect,m=b.useRef,n=b.useState,o=c("WAWebDebounce")(function(a,b){d("WAWebUserPrefsGeneral").setMediaVolumeSettings(a,b)},500);function a(a){var b=a.ref,e=babelHelpers.objectWithoutPropertiesLoose(a,h),f=e.onVolumeChange,g=e.onPlaying,i=e.startTime,j=e.onLoadedMetadata,p=e.onProgress,q=e.onTimeUpdate,r=e.onError,s=m(null);a=c("useMergeRefs")(b,s);b=n(!1);var t=b[0],u=b[1];c("useWAWebOnUnmount")(function(){o.flush()});var v=(b=c("useWAWebStableCallback"))(function(a){var b,c=s.current;(b=e.callbacks)==null||b.onVolumeChange==null||b.onVolumeChange(a);if(c){b=c.getVolume();a=c.getMuted();o(b,a);f({volume:b,muted:a})}}),w=b(function(a){if(!t&&a){var b;(b=e.callbacks)==null||b.onPlaying==null||b.onPlaying(a);u(!0)}g()}),x=b(function(){s.current&&typeof i==="number"&&s.current.setCurrentTime(i)});b=b(function(a){if(i!=null){var b;x();(b=e.callbacks)==null||b.onLoadedMetadata(a)}b={duration:a.currentTarget.duration,volume:a.currentTarget.volume,muted:a.currentTarget.muted,videoWidth:a.currentTarget.videoWidth,videoHeight:a.currentTarget.videoHeight};j(b,a)});var y=function(a){if(!s.current)return;a=s.current.getBuffered();var b=[];if(a)for(var c=0;c<a.length;c++)b.push([a.start(c),a.end(c)]);p(b)},z=function(a){a=a.currentTarget.currentTime;q(a)},A=function(a){var b;b=(b=(b=s.current)==null||(b=b.underlyingVideo())==null?void 0:b.error)!=null?b:null;if(b==null&&a.code!=null){var c;r(a.code);e.onError();(c=e.callbacks)==null||c.onError(a);return}r(b==null?void 0:b.code,b==null?void 0:b.message)},B=function(a){(a=s.current)==null||a.end();e.onEnded()},C=function(a){var b;(b=s.current)==null||b.canPlay();e.onCanPlay==null||e.onCanPlay(a)},D=function(a){var b;(b=s.current)==null||b.onWaiting();e.onWaiting==null||e.onWaiting(a)};l(function(){x()},[i,x]);l(function(){var a=s.current;if(a){var b=d("WAWebUserPrefsGeneral").getMediaVolumeSettings(),c=b.volume;b=b.muted;c!=null&&a.setVolume(c);a.setMuted(b)}},[]);var E=e.msg;return E!=null&&d("WAWebMsgGetters").getIsNewsletterMsg(E)&&d("WAWebNewsletterGatingUtils").isNewsletterVideoPlayLoggingEnabled()?k.jsx(c("WAWebBaseVideoNewsletterContextProvider"),{children:k.jsx(c("WAWebBaseNewsletterVideo.react"),{msg:E,ref:a,src:e.url,poster:e.poster,className:e.className,onVolumeChange:v,onEnded:B,onError:A,onPause:e.onPause,onPlaying:w,onProgress:y,onTimeUpdate:z,onLoadedMetadata:b,autoPlay:e.autoPlay,onCanPlay:C,onWaiting:e.onWaiting,onLoadedData:e.onLoadedData,videoCallbacks:e.callbacks,children:e.children})}):k.jsx(c("WAWebBaseVideo.react"),{ref:a,src:e.url,poster:e.poster,className:e.className,onVolumeChange:v,onEnded:B,onError:A,onPause:e.onPause,onPlaying:w,onProgress:y,onTimeUpdate:z,onLoadedMetadata:b,autoPlay:e.autoPlay,onCanPlay:C,onWaiting:D,onLoadedData:e.onLoadedData,videoCallbacks:e.callbacks,children:e.children})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);